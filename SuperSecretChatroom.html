<!DOCTYPE html>
  <head>
    <title>Citrik's Super Secret Chatroom</title>
  </head>
  <body>
   <ul id="messages"></ul>
   <input id="msgInput" type="text" />
    <button id="submit">Send</button>
    <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-database.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyAfmddsg9sUgU1LkUWlVNXaG3RtqhMChQE",
          authDomain: "citriks-chatroom.firebaseapp.com",
          databaseURL: "https://citriks-chatroom-default-rtdb.firebaseio.com",
          projectId: "citriks-chatroom",
          storageBucket: "citriks-chatroom.appspot.com",
          messagingSenderId: "408933092425",
          appId: "1:408933092425:web:9982f68038b56f5d8d8398",
          measurementId: "G-CK5P3ZHMXD"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        const db = firebase.database();
        const username = prompt("choose a name");
        function sendMessage(e) {
        e.preventDefault();
        const timestamp = Date.now();
        const msgInput = document.getElementById("msgInput");
        const message = msgInput.value;
        messageInput.value = "";

        document
            .getElementById("messages")
        .scrollIntoView({ behavior: "smooth", block: "end", inline: "nearest" });

        db.ref("messages/" + timestamp).set({
            username,
            message,
        });
        }

        const fetchChat = db.ref("messages/");

        fetchChat.on("child_added", function (snapshot) {
        const messages = snapshot.val();
        const message = `<li class=${ 
            username === messages.username ? "sent" : "receive"
        }><span>${messages.username}: </span>${messages.message}</li>`;
        document.getElementById("messages").innerHTML += message;
        });
      </script>
  </body>
</html>